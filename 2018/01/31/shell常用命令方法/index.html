<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> shell 常用命令整理 · Hexo</title><meta name="description" content="shell 常用命令整理 - zfhua"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Hexo"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/aimboy" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/zfhua" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">shell 常用命令整理</h1><div class="post-info">Jan 31, 2018</div><div class="post-content"><h1 id="shell-常用命令整理"><a href="#shell-常用命令整理" class="headerlink" title="shell 常用命令整理"></a>shell 常用命令整理</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#############################</span></span><br><span class="line"><span class="comment"># 操作实例变量参数</span></span><br><span class="line"><span class="comment">#pa='hello'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pva='http://hello/world!'</span></span><br><span class="line"><span class="comment"># pvb='o'</span></span><br><span class="line"><span class="comment"># pv='11aa22'</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 关于下标说明:</span></span><br><span class="line"><span class="comment"># 一般函数是从1位置开始计算</span></span><br><span class="line"><span class="comment"># $&#123;&#125; 运算是从0开始计算</span></span><br><span class="line"><span class="comment"># expr 从1开始计算</span></span><br><span class="line"><span class="comment">################</span></span><br></pre></td></tr></table></figure>
<h3 id="字符名长度"><a href="#字符名长度" class="headerlink" title="字符名长度"></a>字符名长度</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符名长度</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">1. $[<span class="comment">#STR&#125; #STR变量</span></span><br><span class="line">    len=<span class="variable">$&#123;#1&#125;</span></span><br><span class="line">    len=<span class="variable">$&#123;#pva&#125;</span> <span class="comment">#结果: 19;</span></span><br><span class="line">2. expr length [STRTNG] <span class="comment">#STRING变量</span></span><br><span class="line">    1en=`expr 1ength <span class="variable">$1</span>`</span><br><span class="line">    len=`expr length <span class="string">"<span class="variable">$pva</span>"</span>` <span class="comment">#结果: 19;</span></span><br><span class="line">3. expr [STRING] : [REGEXP] <span class="comment">#和`expr match [REGEXP]`一样</span></span><br><span class="line">    len=`expr <span class="string">"<span class="variable">$pva</span>"</span> : <span class="string">".*"</span>`</span><br><span class="line">    len=`expr match <span class="string">"<span class="variable">$pva</span>"</span> <span class="string">".*"</span>`</span><br></pre></td></tr></table></figure>
<h3 id="截取字符串"><a href="#截取字符串" class="headerlink" title="截取字符串"></a>截取字符串</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 截取字符串</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">1.语法: <span class="variable">$&#123;pva:[IndexPOS]:[LEN]&#125;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;pva:1:3&#125;</span> <span class="comment">#结果: 'ttp' #第1位,长度为3的字符;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;pva:0-3:3&#125;</span> <span class="comment">#结果: 'ld!' #倒数第3位,长度为3;</span></span><br><span class="line">2.语法: `expr substr [STR] [POS] [LEN]` <span class="comment">#[POS] counted from 1;</span></span><br><span class="line">    <span class="built_in">echo</span> `expr substr <span class="string">"<span class="variable">$pva</span>"</span> 1 2`</span><br><span class="line">3.语法: cut -c apos,bpos,... <span class="comment">#apos,bpos... 截取apos位置,截取bpos位置...等位置字符;</span></span><br><span class="line">  语法: cut -c spos-epos <span class="comment">#spos-epos 截取字符段,从spos位置到epos位置结束;</span></span><br><span class="line">    <span class="comment">#-c [character]截取字符; -b [byte]截取字节;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$pva</span> | cut -c 1,4 <span class="comment">#结果: 'hp';</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$pva</span> | cut -c 5,1,2 <span class="comment">#结果: 'ht:'截取字符顺序不变;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$pva</span> | cut -c 1-4 <span class="comment">#结果: 'http';</span></span><br><span class="line">4.语法: `awk <span class="string">'&#123;print substr(STR, sPOS,ePOS)&#125;'</span>` <span class="comment">#STR变量,sPOS开始位置,ePOS结束位置;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$pva</span> | awk <span class="string">'&#123;print substr($0,1,4)&#125;'</span> <span class="comment">#结果: 'http';</span></span><br><span class="line">5. dd bs=1 count=4 2&gt;/dev/null <span class="comment">#dd命令</span></span><br><span class="line">6.高级操作: awk &amp;&amp; sed</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$pva</span>|cut -d <span class="string">'/'</span> -f2</span><br><span class="line">    <span class="comment">#针对有单个的特殊字符组成的字符串::</span></span><br><span class="line">    <span class="comment"># -d: 分割域定义规则; -f:获取第几个域;</span></span><br><span class="line">    <span class="comment"># -d'/': 按'/'规则分割字符区域;</span></span><br><span class="line">    <span class="comment"># -f2: 获取第2区域的内容;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">##########</span></span><br><span class="line"><span class="comment">## 概要 ##</span></span><br><span class="line">  1. str=<span class="variable">$&#123;1:0:2&#125;</span> <span class="comment">#2位</span></span><br><span class="line">  2. str=`expr substr <span class="string">"<span class="variable">$pva</span>"</span> 1 2` <span class="comment">#1-2位</span></span><br><span class="line">  3. str=`<span class="built_in">echo</span> <span class="variable">$pva</span> | cut -c1-2` <span class="comment">#1-2位</span></span><br><span class="line">  4. str=`<span class="built_in">echo</span> <span class="variable">$pva</span> | awk <span class="string">'&#123;print substr($0,1,4)&#125;'</span>` <span class="comment">#1-4位</span></span><br><span class="line">  5. str=`<span class="built_in">echo</span> <span class="variable">$pva</span> | dd bs=1 count=4 2&gt;/dev/nul1` <span class="comment">#1-4位</span></span><br><span class="line"><span class="comment">#特殊: 不规则截取#|##|%|%%</span></span><br><span class="line">pvx=<span class="string">'/'</span></span><br><span class="line">str=<span class="variable">$&#123;pva#*/&#125;</span> <span class="comment">#'*/'类似正则表达,此从左往右边匹配;</span></span><br><span class="line">str=<span class="variable">$&#123;pva##*$pvx&#125;</span></span><br><span class="line">str=<span class="variable">$&#123;pva%/*&#125;</span> <span class="comment">#'/*'类似正则表达，此处从右往左边匹配；</span></span><br><span class="line">str=<span class="variable">$&#123;pva%%/*&#125;</span></span><br><span class="line"><span class="comment"># 注: 完整字符串匹配,必须要从第一个字符开始,否则匹配不上;</span></span><br><span class="line"><span class="comment">#只能模糊匹配[#*tp:] 或者 [%worl*]</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$&#123;pva#http&#125;</span> <span class="comment">#'#'必须左起开头匹配字符'http',其他字符匹配不上;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$&#123;pva%world\!&#125;</span> <span class="comment">#'%'必须右起开头字符开始匹配;</span></span><br></pre></td></tr></table></figure>
<h3 id="拼接多个字符串"><a href="#拼接多个字符串" class="headerlink" title="拼接多个字符串"></a>拼接多个字符串</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拼接多个字符串</span></span><br><span class="line"><span class="comment"># $@：表示参数 组成的字符串数组</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">1. <span class="keyword">for</span> s <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line">2. <span class="keyword">while</span> + <span class="built_in">shift</span></span><br></pre></td></tr></table></figure>
<h4 id="实例脚本"><a href="#实例脚本" class="headerlink" title="实例脚本"></a>实例脚本</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#####################</span></span><br><span class="line"><span class="comment">### 实例: 合并子串 ###</span></span><br><span class="line"><span class="comment"># 示例1 func_subadd_1</span></span><br><span class="line"><span class="function"><span class="title">func_subadd_1</span></span>()&#123;</span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$#</span> -gt 0 ]; <span class="keyword">then</span></span><br><span class="line">    str_a=<span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span> str <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">      str_a=<span class="variable">$str_a</span><span class="variable">$str</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$str_a</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">'参数错误!'</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#func_subadd_1 $@</span></span><br><span class="line">func_subadd_1 $*</span><br><span class="line"><span class="comment">#####################</span></span><br><span class="line"><span class="comment"># 示例2 func_subadd_2</span></span><br><span class="line"><span class="function"><span class="title">func_subadd_2</span></span>()&#123;</span><br><span class="line">  p_sb=<span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$#</span> -gt 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">while</span> [ <span class="variable">$#</span> -gt 0 ]</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">      p_sb=<span class="variable">$p_sb</span><span class="variable">$1</span></span><br><span class="line">      <span class="built_in">shift</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$p_sb</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">'参数错误!'</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#func_subadd_2 $@</span></span><br><span class="line">func_subadd_2 $*</span><br></pre></td></tr></table></figure>
<h4 id="小写转大写-amp-amp-大写转小写"><a href="#小写转大写-amp-amp-大写转小写" class="headerlink" title="小写转大写 &amp;&amp; 大写转小写"></a>小写转大写 &amp;&amp; 大写转小写</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###########</span></span><br><span class="line"><span class="comment"># tr 或者 awk</span></span><br><span class="line"><span class="comment"># 小写转大写</span></span><br><span class="line">  1. <span class="built_in">echo</span> <span class="string">'hello worid.'</span> | tr <span class="string">'[a-z]'</span> <span class="string">'[A-Z]'</span></span><br><span class="line">  2. <span class="built_in">echo</span> <span class="string">'hello WORLd!'</span> | awk <span class="string">'&#123;print toupper($0)&#125;'</span></span><br><span class="line"><span class="comment"># 大写转小写</span></span><br><span class="line">  1. <span class="built_in">echo</span> <span class="string">'HELLO WORLD!'</span> | tr <span class="string">'[A-Z]'</span> <span class="string">'[a-z]'</span></span><br><span class="line">  2. <span class="built_in">echo</span> <span class="string">'HELLO World!'</span> | awk <span class="string">'&#123;print tolower($0)&#125;'</span></span><br></pre></td></tr></table></figure>
<h4 id="反转字符串"><a href="#反转字符串" class="headerlink" title="反转字符串"></a>反转字符串</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1. revStr=`<span class="built_in">echo</span> <span class="variable">$1</span> | rev`</span><br></pre></td></tr></table></figure>
<h4 id="子串在母串中的位置"><a href="#子串在母串中的位置" class="headerlink" title="子串在母串中的位置"></a>子串在母串中的位置</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. idx=`expr index <span class="variable">$pva</span> <span class="string">"wol"</span>` <span class="comment">#匹配字符'l';</span></span><br><span class="line">  idx=`expr index <span class="variable">$pva</span> <span class="string">"w"</span>` <span class="comment">#14</span></span><br><span class="line">  <span class="comment">#[expr index ... ]只能返回所有匹配的字符中的位置最小的那个位置</span></span><br><span class="line">2.</span><br></pre></td></tr></table></figure>
<h4 id="子串在母串中的个数"><a href="#子串在母串中的个数" class="headerlink" title="子串在母串中的个数"></a>子串在母串中的个数</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. num=`<span class="built_in">echo</span> <span class="variable">$pva</span> | awk -F <span class="string">"o"</span> <span class="string">"&#123;print NF-1&#125;"</span>` <span class="comment">#2</span></span><br><span class="line">2. <span class="comment">#|##|%|%% + 递归计算</span></span><br><span class="line">   <span class="comment">#统计递归次数</span></span><br><span class="line">3..</span><br></pre></td></tr></table></figure>
<h4 id="替换字符串"><a href="#替换字符串" class="headerlink" title="替换字符串"></a>替换字符串</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#####</span></span><br><span class="line"><span class="comment"># pva|pvb|pv实例变量</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">  1. newStr=`<span class="built_in">echo</span> <span class="variable">$&#123;pva/$pvb/$pv&#125;</span>` <span class="comment">#替换第一个匹配串</span></span><br><span class="line">  2. newStr=`<span class="built_in">echo</span> <span class="variable">$&#123;pva//$pvb/$pv&#125;</span>` <span class="comment">#替换所有匹配串</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">#类似 $&#123;&#125; 表达式[#|%]</span></span><br><span class="line">  3. newStr=`<span class="built_in">echo</span> <span class="variable">$&#123;pva/#*$pvb/$pv&#125;</span>` <span class="comment">#替换最后一个匹配（左起）</span></span><br><span class="line">  4. newStr=`<span class="built_in">echo</span> <span class="variable">$&#123;pva/%$pvb*/$pv&#125;</span>` <span class="comment">#替换最后一个匹配（右起）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#####################</span></span><br><span class="line"><span class="comment">#插入字符串--(拼接字符)</span></span><br><span class="line">  <span class="comment">#指定位置插入</span></span><br><span class="line">    1. 字符串拼接: 1eftS+ [objStr] +rightS</span><br><span class="line">  <span class="comment">#指定字符转前后插入</span></span><br><span class="line">    1. 字符串替换：o1dS --&gt; &#123; <span class="variable">$oldS</span><span class="variable">$newS</span> || <span class="variable">$newS</span><span class="variable">$oldS</span> &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#################</span></span><br><span class="line"><span class="comment"># 拓展 $&#123;&#125; 表达式:</span></span><br><span class="line"><span class="comment"># 实例: v_aa='http://www.bai.com/tip'</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># [# 截取: 从左侧开始匹配,找到第一个匹配串,去掉匹配串和左侧串,保留右侧子串]</span></span><br><span class="line"><span class="comment"># [## 截取: 从左侧匹配,找到最后一个匹配串,去掉匹配串及左侧串,保留右侧子串]</span></span><br><span class="line"><span class="comment"># [% 截取: 与#相反,从右侧匹配,找到第一个匹配串,去掉右侧串和匹配串,保留左侧串]</span></span><br><span class="line"><span class="comment"># [%% 截取: 与##相反,从右侧匹配,找到最后一个匹配串,去掉右侧串和匹配串,保留左侧串]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">v_pa=<span class="variable">$&#123;v_aa#*/&#125;</span>  <span class="comment">#'/www.bai.com/tip' --&gt; 左侧第一个匹配串后面的子串</span></span><br><span class="line">v_pa=<span class="variable">$&#123;v_aa##*/&#125;</span> <span class="comment">#'tip' --&gt; 左侧最后一个匹配串后面的子串</span></span><br><span class="line">v_pa=<span class="variable">$&#123;v_aa%/*&#125;</span>  <span class="comment">#'http://www.bai.com' --&gt; 右侧第一个匹配串往左后面的子串</span></span><br><span class="line">v_pa=<span class="variable">$&#123;v_aa%%/*&#125;</span> <span class="comment">#'http:' --&gt; 右侧最后一个匹配串往左后面的子串</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#################</span></span><br><span class="line"><span class="comment"># expr 表达式:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">1. expr length [STRING]</span><br><span class="line">2. expr substr [STRTNG] [POS] [LENGTH] <span class="comment">#[P0S]从1开始</span></span><br><span class="line">3. expr index [STRING] [CHARS]</span><br><span class="line">4. expr match [REGEXP] <span class="comment"># same `expr [STRING] : [REGEXP]`</span></span><br><span class="line">  <span class="comment">#eg.</span></span><br><span class="line">  <span class="built_in">echo</span> `expr match <span class="string">"<span class="variable">$pva</span>"</span> : <span class="string">"worl*"</span>`</span><br><span class="line"><span class="comment">#查找位置(字符串匹配不好,字符匹配)</span></span><br><span class="line">  <span class="built_in">echo</span> `expr index <span class="string">"<span class="variable">$v_pv</span>"</span> od` <span class="comment">#查找任意给定chars位置,返回位置最小的(1开始计数);</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#########</span></span><br><span class="line"><span class="comment"># 测试效率</span></span><br><span class="line">1. time <span class="keyword">for</span> i <span class="keyword">in</span> $(seq 10000);<span class="keyword">do</span> a=<span class="variable">$&#123;#pva&#125;</span>;<span class="keyword">done</span>;</span><br><span class="line">    real 0m0.334s</span><br><span class="line">    user 0m0.224s</span><br><span class="line">    sys  0m0.004s</span><br><span class="line">2. time <span class="keyword">for</span> i <span class="keyword">in</span> $(seq 10000); <span class="keyword">do</span> a=<span class="variable">$&#123;expr length $pva&#125;</span>; <span class="keyword">done</span>;</span><br><span class="line">    real 0m23.530s</span><br><span class="line">    user 0m0.436s</span><br><span class="line">    Sys  0m3.708s</span><br><span class="line">  <span class="comment">#结果:</span></span><br><span class="line">  <span class="comment">#内置命令教率高于其他命令,尽量优先使用内置命令;</span></span><br></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2018/02/01/shell之$用法/" class="prev">PREV</a><a href="/2018/01/28/Hexo 制作博客/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://yoursite.com">zfhua</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>